(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{14:function(e,t,a){e.exports={signup_container:"styles_signup_container__2F5es",signup_form_container:"styles_signup_form_container__rwQu3",left:"styles_left__1MIqW",right:"styles_right__p5zLC",form_container:"styles_form_container__3ebUJ",input:"styles_input__3kFxi",error_msg:"styles_error_msg__1j2Vi",white_btn:"styles_white_btn__3lGxo",green_btn:"styles_green_btn__AxJ45"}},16:function(e,t,a){e.exports={login_container:"styles_login_container__3yAYn",login_form_container:"styles_login_form_container__nDVQu",left:"styles_left__3Dc4W",form_container:"styles_form_container__k9AXX",input:"styles_input__3ipb_",error_msg:"styles_error_msg__2-JDl",right:"styles_right__3GiI2",white_btn:"styles_white_btn__1D9Ty",green_btn:"styles_green_btn__IDwwK"}},50:function(e,t,a){e.exports=a.p+"static/media/trashcan.510178ea.svg"},51:function(e,t,a){e.exports=a.p+"static/media/unlock.74eb945f.svg"},55:function(e,t,a){e.exports=a(86)},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),s=a(3),o=Object(n.createContext)(),u=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],l=a[1];return r.a.createElement(o.Provider,{value:[c,l]},e.children)},m=Object(n.createContext)(),i=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],l=a[1];return r.a.createElement(m.Provider,{value:[c,l]},e.children)},p=a(19),d=a.n(p),f=a(25),b=a(7),h=a(1),g=a(14),_=a.n(g),E=a(4),v=a(26),k=a(33),y=a.n(k),j=function(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),u=o[0],m=o[1],i=Object(E.g)(),p=function(e){var t=e.currentTarget;c(Object(h.a)(Object(h.a)({},a),{},Object(b.a)({},t.name,t.value)))},g=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,"https://user-management-table-app.herokuapp.com/users",e.next=5,y.a.post("https://user-management-table-app.herokuapp.com/users",a);case 5:n=e.sent,r=n.data,i("/login"),console.log(r.message),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response&&e.t0.response.status>=400&&e.t0.response.status<=500&&m(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:_.a.signup_container},r.a.createElement("div",{className:_.a.signup_form_container},r.a.createElement("div",{className:_.a.left},r.a.createElement("h1",null,"Welcome Back"),r.a.createElement(v.b,{to:"/login"},r.a.createElement("button",{type:"button",className:_.a.white_btn},"Sign in"))),r.a.createElement("div",{className:_.a.right},r.a.createElement("form",{className:_.a.form_container,onSubmit:g},r.a.createElement("h1",null,"Create account"),r.a.createElement("input",{type:"text",placeholder:"name",name:"name",onChange:p,value:a.name,required:!0,className:_.a.input}),r.a.createElement("input",{type:"email",placeholder:"email",name:"email",onChange:p,value:a.email,required:!0,className:_.a.input}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",onChange:p,value:a.password,required:!0,className:_.a.input}),u&&r.a.createElement("div",{className:_.a.error_msg},u),r.a.createElement("button",{type:"submit",className:_.a.green_btn},"Sign Up"))))))},O=a(16),w=a.n(O),N=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),u=o[0],m=o[1],i=function(e){var t=e.currentTarget;c(Object(h.a)(Object(h.a)({},a),{},Object(b.a)({},t.name,t.value)))},p=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,"https://user-management-table-app.herokuapp.com/auth",e.next=5,y.a.post("https://user-management-table-app.herokuapp.com/auth",a);case 5:n=e.sent,r=n.data,localStorage.setItem("token",r.data),localStorage.setItem("currentUser",JSON.stringify(r.user)),window.location="/",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response&&e.t0.response.status>=400&&e.t0.response.status<=500&&m(e.t0.response.data.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:w.a.login_container},r.a.createElement("div",{className:w.a.login_form_container},r.a.createElement("div",{className:w.a.left},r.a.createElement("form",{className:w.a.form_container,onSubmit:p},r.a.createElement("h1",null,"Login to Your Account"),r.a.createElement("input",{type:"email",placeholder:"email",name:"email",onChange:i,value:a.email,required:!0,className:w.a.input}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",onChange:i,value:a.password,required:!0,className:w.a.input}),u&&r.a.createElement("div",{className:w.a.error_msg},u),r.a.createElement("button",{type:"submit",className:w.a.green_btn},"Sign In"))),r.a.createElement("div",{className:w.a.right},r.a.createElement("h1",null,"New Here?"),r.a.createElement(v.b,{to:"/signup"},r.a.createElement("button",{type:"button",className:w.a.white_btn},"Sign Up"))))))},x=(a(47),a(90)),S=a(88),C=a(91),I=a(37),A=function(){var e=Object(n.useContext)(m),t=Object(s.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){c(JSON.parse(localStorage.getItem("currentUser")))}),[]);return r.a.createElement("nav",null,r.a.createElement(x.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(S.a,null,a&&r.a.createElement(x.a.Brand,null,"Welcome ",a.name),r.a.createElement(C.a,{className:"me-auto"}),r.a.createElement(C.a,null,r.a.createElement(I.a,{onClick:function(){localStorage.removeItem("currentUser"),localStorage.removeItem("token"),window.location.reload()},variant:"light",className:"px-4 py-2 fw-bold"},"Logout")))))},U=a(50),J=a.n(U),D=a(51),L=a.n(D),q=a(52),T=(a(85),function(){var e=Object(n.useContext)(o),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),u=Object(s.a)(l,2),i=u[0],p=u[1],b=Object(n.useContext)(m),h=Object(s.a)(b,2),g=h[0],_=(h[1],function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==t){e.next=5;break}return e.next=3,c(a.filter((function(e){return!1===e.checked})));case 3:e.next=7;break;case 5:return e.next=7,c(a.map((function(e){return e.checked&&(e.status=t),e})));case 7:p((function(e){return e+1}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(n.useEffect)((function(){i&&fetch("https://user-management-table-app.herokuapp.com/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){var t=e.find((function(e){return e._id===g._id}));t&&"blocked"!==t.status||(localStorage.removeItem("currentUser"),localStorage.removeItem("token"),window.location.reload())})).catch((function(e){console.log(e)}))}),[i]);return r.a.createElement("div",{className:"d-flex justify-content-end w-100 bg-dark bg-opacity-50 mt-5"},r.a.createElement(q.a,{"aria-label":"Menagement buttons",className:"bg-transparent w-25",style:{height:"65px",minWidth:"450px"}},r.a.createElement(I.a,{onClick:function(){a.some((function(e){return!0===e.checked}))&&_("blocked")},variant:"danger",className:"h-100 fs-5 fw-bold",style:{letterSpacing:"3px"}},"Block"),r.a.createElement(I.a,{onClick:function(){a.some((function(e){return!0===e.checked}))&&_("active")},className:"h-100 border-0 btn-hover py-3 unlock-user"},r.a.createElement("img",{src:L.a,alt:"Unlock",className:"h-100"})),r.a.createElement(I.a,{onClick:function(){a.some((function(e){return!0===e.checked}))&&_("delete")},className:"h-100 border-0 btn-hover py-3 delete-user"},r.a.createElement("img",{src:J.a,alt:"Trashcan",className:"h-100"}))))}),F=a(89),W=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{onInput:e.onClick,type:"checkbox",name:"selectUser",className:"checkbox",checked:e.checked})),r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.lastLoggedAt),r.a.createElement("td",null,e.registeredAt),r.a.createElement("td",null,e.status))},B=function(){var e=Object(n.useContext)(o),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),u=Object(s.a)(l,2),m=u[0],i=u[1],p=Object(n.useState)(null),d=Object(s.a)(p,2),f=d[0],b=d[1];Object(n.useEffect)((function(){fetch("https://user-management-table-app.herokuapp.com/users").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.checked=!1,e}));c(t),b(t.map((function(){return!1})))})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){f&&(f.every((function(e){return e===f[0]}))&&f[0]?i(!0):i(!1))}),[f]),Object(n.useEffect)((function(){a&&c(a.map((function(e,t){return e.checked=f[t],e})))}),[f]);return r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0,variant:"secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{onClick:function(){!1===m?(i(!0),b(a.map((function(){return!0})))):(i(!1),b(a.map((function(){return!1}))))},type:"checkbox",name:"selectAll",className:"checkbox",checked:m})),r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Last login time"),r.a.createElement("th",null,"Registration time"),r.a.createElement("th",null,"Status"))),f&&r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement(W,{id:e._id,name:e.name,email:e.email,lastLoggedAt:e.lastLoggedAt,registeredAt:e.registeredAt,status:e.status,key:e._id,checked:f[t],onClick:function(){var e;e=t,b(f.map((function(t,a){return e===a?!t:t})))}})}))))},P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("main",{className:"p-0"},r.a.createElement(T,null),r.a.createElement(B,null)))},G=function(){var e=localStorage.getItem("token");return r.a.createElement(v.a,null,r.a.createElement(i,null,r.a.createElement(u,null,r.a.createElement(E.d,null,e&&r.a.createElement(E.b,{path:"/",element:r.a.createElement(P,null)}),r.a.createElement(E.b,{path:"/signup",element:r.a.createElement(j,null)}),r.a.createElement(E.b,{path:"/login",element:r.a.createElement(N,null)}),r.a.createElement(E.b,{path:"/",element:r.a.createElement(E.a,{replace:!0,to:"/login"})})))))};l.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.26660f9e.chunk.js.map